# Cursor Prompt Template for Joule HVAC Project

## When to Use This Template
Paste this template **before** your actual request when you need:
- A minimal, focused fix
- Verification via an oracle command
- Clear documentation of what changed and why

---

## Template (Copy & Paste This)

```
REQUIREMENTS:
- Make the smallest change that could work
- Don't claim success until you run: <oracle-command> and it passes
- If command output is unknown, ask for it—don't guess
- Keep changes in <file-list> only
- Summarize: root cause, fix, and why the oracle proves it

ORACLE: <oracle-command>
FILES: <file-list>
SCOPE: <what-to-change>

<your-actual-request-here>
```

---

## Example Usage

### Example 1: Bridge Health Fix
```
REQUIREMENTS:
- Make the smallest change that could work
- Don't claim success until you run: ./scripts/validate-bridge-health.sh and it prints JOULE_BRIDGE_OK=1
- If command output is unknown, ask for it—don't guess
- Keep changes in src/lib/jouleBridgeApi.js only
- Summarize: root cause, fix, and why the oracle proves it

ORACLE: ./scripts/validate-bridge-health.sh | grep -q "JOULE_BRIDGE_OK=1"
FILES: src/lib/jouleBridgeApi.js
SCOPE: Increase timeout in checkBridgeHealth function

The bridge health check is timing out after 5 seconds. Increase it to 30 seconds.
```

### Example 2: Context Migration
```
REQUIREMENTS:
- Make the smallest change that could work
- Don't claim success until you run: npm run build && curl -s http://localhost:5173 > /dev/null
- If command output is unknown, ask for it—don't guess
- Keep changes in src/pages/ForecastDebug.jsx only
- Summarize: root cause, fix, and why the oracle proves it

ORACLE: npm run build 2>&1 | grep -q "built in" && echo "Build successful"
FILES: src/pages/ForecastDebug.jsx
SCOPE: Replace useJouleBridge hook with useJouleBridgeContext

Fix the "bridgeAvailable is not defined" error in ForecastDebug.jsx
```

---

## Quick Reference Card

**For Bridge Issues:**
- Oracle: `./scripts/validate-bridge-health.sh | grep -q "JOULE_BRIDGE_OK=1"`
- Common files: `src/lib/jouleBridgeApi.js`, `prostat-bridge/server.py`, `src/components/JouleBridgeSettings.jsx`

**For Build/Test Issues:**
- Oracle: `npm run build 2>&1 | tail -5`
- Common files: `src/pages/*.jsx`, `src/components/*.jsx`

**For Context/State Issues:**
- Oracle: `npm run build && echo "Build successful"`
- Common files: `src/contexts/*.jsx`, `src/App.jsx`

---

## Tips

1. **Be specific about the oracle**: Use a command that actually verifies the fix works
2. **Limit file scope**: Only include files that MUST change
3. **State the problem clearly**: What's broken? What should happen?
4. **Ask for output if unsure**: If you don't know what the oracle should output, ask first

---

## Your Project-Specific Template

```
REQUIREMENTS:
- Make the smallest change that could work
- Don't claim success until you run: ./scripts/validate-bridge-health.sh and it prints JOULE_BRIDGE_OK=1
- If command output is unknown, ask for it—don't guess
- Keep changes in <file-list> only
- Summarize: root cause, fix, and why the oracle proves it

ORACLE: ./scripts/validate-bridge-health.sh | grep "JOULE_BRIDGE_OK=1"
FILES: <comma-separated-file-list>
SCOPE: <brief-description-of-change>

<your-request>
```

